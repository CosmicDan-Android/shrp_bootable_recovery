<?xml version="1.0"?>
<recovery>
	<pages>
		<page name="mount">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@mount_hdr=Mount}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@storage_hdr=Storage: %tw_storage_display_name% (%tw_storage_free_size% MB)}</text>
			</text>
			<partitionlist>
				<placement x="50" y="%c_text_sub_y%" w="%file_selector_default_w%" h="%t_4th_radio_text_pos%"/>
				<listtype name="mount"/>
			</partitionlist>


			<text style="c_sub">
				<placement x="130" y="1650"/>
				<text>{@mount_sys_ro_chk=Mount system partition read-only}</text>
			</text>
			<button>
				<condition var1="tw_mount_system_ro" op="=" var2="0"/>
				<placement x="%c_hawk_base_column%" y="1630"/>
				<image resource="checkbox_false"/>
				<actions>
					<action function="mountsystemtoggle">1</action>
				</actions>
			</button>
			<button>
				<condition var1="tw_mount_system_ro" op="!=" var2="0"/>
				<placement x="%c_hawk_base_column%" y="1630"/>
				<image resource="checkbox_true"/>
				<actions>
					<action function="set">tw_lifetime_writes=2</action>
					<action function="page">system_readonly_check</action>
				</actions>
			</button>

			<button>
			  <placement x="860" y="1090"/>
				<conditions>
					<condition var1="tw_is_encrypted" var2="1"/>
					<condition var1="tw_is_decrypted" var2="0"/>
				</conditions>
			  <image resource="c_backup_encryption"/>
			  <actions>
			    <action function="set">tw_crypto_user_id=0</action>
				<action function="set">tw_crypto_password=</action>
				<action function="set">tw_password_fail=0</action>
				<action function="set">tw_crypto_pwtype=%tw_crypto_pwtype_0%</action>
				<action function="page">decrypt</action>
			  </actions>
			</button>

			<button>
				<condition var1="tw_has_usb_storage" var2="1"/>
				<placement x="860" y="1270"/>
				<image resource="c_usb_disabled"/>
				<action function="page">usb_mount</action>
			</button>
			<button>
				<placement x="860" y="1628"/>
				<image resource="c_storage"/>
				<actions>
					<action function="set">tw_back=mount</action>
					<action function="overlay">select_storage</action>
				</actions>
			</button>

			<button>
				<conditions>
					<condition var1="tw_has_mtp" var2="1"/>
					<condition var1="tw_mtp_enabled" var2="0"/>
				</conditions>
				<placement x="860" y="1450"/>
				<image resource="c_mtp_disabled"/>
				<action function="startmtp"/>
			</button>

			<button>
				<conditions>
					<condition var1="tw_has_mtp" var2="1"/>
					<condition var1="tw_mtp_enabled" var2="1"/>
				</conditions>
				<placement x="860" y="1450"/>
				<image resource="c_mtp_enabled"/>
				<action function="stopmtp"/>
			</button>


			<action>
				<touch key="home"/>
				<action function="page">c_refresh</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">c_refresh</action>
			</action>
		</page>

		<page name="usb_mount">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@mount_hdr=Mount}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@usb_storage_hdr=USB Storage}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<text>{@usb_stor_mnt1=USB Storage Mounted}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y2%"/>
				<text>{@c_usb_last=Be sure to safely remove your device from your computer before unmounting!}</text>
			</text>

			<button>
				<placement x="860" y="1628"/>
				<image resource="c_usb"/>
				<action function="page">usb_umount</action>
			</button>


			<action>
				<action function="mount">usb</action>
				<action function="set">tw_busy=1</action>
			</action>
		</page>

		<page name="usb_umount">
			<action>
				<action function="unmount">usb</action>
			</action>

			<action>
				<action function="page">mount</action>
				<action function="set">tw_busy=0</action>
			</action>
		</page>

		<page name="system_readonly_check">
			<action>
				<action function="checkpartitionlifetimewrites">/system</action>
			</action>

			<action>
				<condition var1="tw_lifetime_writes" var2="1"/>
				<actions>
					<action function="mountsystemtoggle">0</action>
					<action function="page">mount</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_lifetime_writes" var2="0"/>
				<actions>
					<action function="set">tw_back=mount</action>
					<action function="page">system_readonly</action>
				</actions>
			</action>
		</page>

        <page name="system_readonly">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@sys_ro_hdr=Unmodified System Partition}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@sys_ro_keep=Keep System Read only?}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<text>{@sys_rop1=TWRP can leave your system partition unmodified}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y2%"/>
				<text>{@sys_rop2=to make it easier for you to take official updates.}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y3%"/>
				<text>{@sys_rop3=TWRP will be unable to prevent the stock ROM from}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y4%"/>
				<text>{@sys_rop4=replacing TWRP and will not offer to root your device.}</text>
			</text>
			<text style="c_sub_failed">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y5%"/>
				<text>{@sys_rop5=Installing zips or performing adb operations may still}</text>
			</text>
			<text style="c_sub_failed">
				<placement x="%c_hawk_base_column%" y="%dash_txt_1st_row%"/>
				<text>{@sys_rop6=modify the system partition.}</text>
			</text>

			<checkbox>
				<condition var1="tw_is_encrypted" var2="0"/>
				<placement x="%c_hawk_base_column%" y="%c_custom_pos%"/>
				<text>{@sys_ro_never_show_chk=Never show this screen during boot again}</text>
				<data variable="tw_never_show_system_ro_page"/>
			</checkbox>

			<button>
				<placement x="860" y="1628"/>
				<image resource="c_ok"/>
				<actions>
					<action function="mountsystemtoggle">1</action>
					<action function="set">tw_page_done=1</action>
					<action function="page">%tw_back%</action>
				</actions>
			</button>
			<button>
				<placement x="860" y="1450"/>
				<image resource="c_cancel"/>
				<actions>
					<action function="mountsystemtoggle">0</action>
					<action function="set">tw_page_done=1</action>
					<action function="page">%tw_back%</action>
				</actions>
			</button>
		</page>
		<page name="decrypt">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@mount_btn=Mount}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@decrypt_data_btn=Decrypt Data}</text>
			</text>

			<action>
				<condition var1="tw_crypto_pwtype" var2="2"/>
				<action function="page">decrypt_pattern</action>
			</action>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<conditions>
					<condition var1="tw_password_fail" op="!=" var2="1"/>
					<condition var1="tw_is_fbe" op="!=" var2="1"/>
				</conditions>
				<text>{@enter_pass=Enter Password:}</text>
			</text>

			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<conditions>
					<condition var1="tw_password_fail" op="!=" var2="1"/>
					<condition var1="tw_is_fbe" op="=" var2="1"/>
				</conditions>
				<text>{@decrypt_data_enter_pass_fbe=Enter Password for User [%tw_crypto_user_id%]}</text>
			</text>

			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<condition var1="tw_password_fail" op="=" var2="1"/>
				<text>{@restore_dec_fail=Password failed, please try again!}</text>
			</text>

			<fill color="nav_bg">
				<placement x="50" y="%dash_ico_1st_row%" w="970" h="94"/>
			</fill>

			<input>
				<placement x="80" y="%input_file_manager_y%" w="800" h="64"/>
				<background color="%nav_bg%"/>
				<text>%tw_crypto_display%</text>
				<data name="tw_crypto_password" mask="*" maskvariable="tw_crypto_display"/>
				<restrict minlen="1" maxlen="254"/>
				<action function="page">trydecrypt</action>
			</input>

			<button>
				<placement x="860" y="915"/>
				<image resource="c_cancel"/>
				<actions>
					<action function="page">button_check</action>
				</actions>
			</button>
			<template name="keyboardtemplate"/>

		</page>

		<page name="decrypt_pattern">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@mount_btn=Mount}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@decrypt_data_btn=Decrypt Data}</text>
			</text>
			<text style="c_sub">
				<condition var1="tw_is_fbe" op="!=" var2="1"/>
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<text>{@decrypt_data_enter_pattern=Enter Pattern.}</text>
			</text>

			<text style="c_sub">
				<condition var1="tw_is_fbe" var2="1"/>
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<text>{@decrypt_data_enter_pattern_fbe=Enter Pattern for User [%tw_crypto_user_id%]}</text>
			</text>

			<text style="c_sub">
				<condition var1="tw_password_fail" var2="1"/>
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y2%"/>
				<text>{@decrypt_data_failed_pattern=Pattern failed, please try again!}</text>
			</text>

			<patternpassword>
				<placement x="%pattern_x%" y="%row5_y%" w="%pattern_size%" h="%pattern_size%"/>
				<dot color="%c_black%" activecolor="%c_black%" radius="%pattern_dot_dia%"/>
				<line color="%c_black%" width="%pattern_line_w%"/>
				<data name="tw_crypto_password"/>
				<action function="page">trydecrypt</action>
			</patternpassword>

			<button style="c_circle4">
				<placement x="680" y="1628"/>
				<text>3x3</text>
				<action function="set">tw_gui_pattern_grid_size=3</action>
			</button>

			<button style="c_circle4">
				<placement x="500" y="1628"/>
				<text>4x4</text>
				<action function="set">tw_gui_pattern_grid_size=4</action>
			</button>

			<button style="c_circle4">
				<placement x="320" y="1628"/>
				<text>5x5</text>
				<action function="set">tw_gui_pattern_grid_size=5</action>
			</button>

			<button style="c_circle4">
				<placement x="140" y="1628"/>
				<text>6x6</text>
				<action function="set">tw_gui_pattern_grid_size=6</action>
			</button>

			<button>
				<placement x="860" y="1628"/>
				<image resource="c_cancel"/>
				<actions>
					<action function="page">button_check</action>
				</actions>
			</button>
		</page>

		<page name="trydecrypt">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@mount_btn=Mount}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@restore_try_decrypt_s=Trying Decryption}</text>
			</text>
			<template name="c_console_custom"/>

			<template name="progress_bar"/>


			<action>
				<action function="decrypt"/>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="!=" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_password_fail=1</action>
					<action function="page">decrypt</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="=" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_page_done=1</action>
					<action function="page">c_refresh</action>
				</actions>
			</action>
		</page>
	</pages>
</recovery>
