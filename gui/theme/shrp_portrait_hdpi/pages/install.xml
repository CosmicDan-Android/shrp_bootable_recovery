<?xml version="1.0"?>
<recovery>
	<pages>
		<page name="install">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<template name="c_simple_sort"/>

			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@c_flash=Flash}</text>
			</text>

			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@select_file_from_storage=Select File from %tw_storage_display_name% (%tw_storage_free_size% MB)}</text>
			</text>

			<fileselector>
				<placement x="%c_hawk_base_column%" y="%file_selector_default_y%" w="%file_selector_default_w%" h="1460"/>
				<filter folders="1" files="1" extn=".zip,.img,.ozip"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<sort name="tw_gui_sort_order"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<button>
				<placement x="860" y="1628"/>
				<image resource="c_storage"/>
				<actions>
					<action function="set">tw_back=install</action>
					<action function="overlay">select_storage</action>
				</actions>
			</button>

			<action>
				<conditions>
					<condition var1="tw_filename" op="modified"/>
				</conditions>
				<actions>
					<action function="flashOP">%tw_filename%</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">c_refresh</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">c_refresh</action>
			</action>
		</page>

		<page name="flash_confirm">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<condition var1="tw_selectimage" var2="0"/>
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@c_flash_zip=Flash Zip}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@zip_queue_count=%tw_zip_queue_count% of max of 10 Files queued}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<text>{@zip_warn1=This operation may install incompatible}</text>
			</text>

			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y2%"/>
				<text>{@zip_warn2=Software and render your device unusable.}</text>
			</text>

			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y3%"/>
				<text>{@zip_back_cancel=Press back to cancel adding this zip.}</text>
			</text>

			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="600"/>
				<text>{@folder=Folder:}</text>
			</text>

			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="675"/>
				<text>%tw_zip_location%</text>
			</text>

			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="775"/>
				<text>{@file=File:}</text>
			</text>

			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="850"/>
				<text>%tw_file%</text>
			</text>

			<checkbox>
				<condition var1="tw_has_deviceab" var2="1"/>
				<placement x="%c_hawk_base_column%" y="1350"/>
				<text>{@active_slot_install=Install in the active slot}</text>
				<data variable="tw_active_slot_install"/>
			</checkbox>

			<checkbox>
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<placement x="%c_hawk_base_column%" y="1425"/>
				<text>{@inject_shrp_chk=Inject SHRP after install}</text>
				<data variable="tw_inject_after_zip"/>
			</checkbox>

			<checkbox>
				<placement x="%c_hawk_base_column%" y="1500"/>
				<text>{@inject_magisk_chk=Inject Magisk after install}</text>
				<data variable="tw_mkinject_after_zip"/>
			</checkbox>

			<checkbox>
				<placement x="%c_hawk_base_column%" y="1575"/>
				<text>{@zip_sig_chk=Zip signature verification}</text>
				<data variable="tw_signed_zip_verify"/>
			</checkbox>

			<checkbox>
				<placement x="%c_hawk_base_column%" y="1650"/>
				<text>{@install_reboot_chk=Reboot after installation is complete}</text>
				<data variable="tw_install_reboot"/>
			</checkbox>

			<button style="c_queue">
				<placement x="860" y="1270"/>
				<text></text>
				<action function="page">install</action>
			</button>

			<button>
				<placement x="860" y="1450"/>
				<image resource="c_cancel"/>
				<actions>
					<action function="queueclear"/>
					<action function="set">isShrpZip=0</action>
					<action function="set">c_queue_enabled=0</action>
					<action function="page">install</action>
				</actions>
			</button>

			<button>
				<placement x="860" y="1628"/>
				<image resource="c_ok"/>
				<action function="page">c_flash_zip_confirmer</action>
			</button>


			<action>
				<touch key="back"/>
				<actions>
					<action function="queueclear"/>
					<action function="set">isShrpZip=0</action>
					<action function="set">c_queue_enabled=0</action>
					<action function="page">install</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="queueclear"/>
					<action function="set">isShrpZip=0</action>
					<action function="set">c_queue_enabled=0</action>
					<action function="page">c_refresh</action>
				</actions>
			</action>
		</page>

		<page name="flash_zip">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@install_zip_count_hdr=Flash Zip %tw_zip_index% of %tw_zip_queue_count%}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>%tw_file%</text>
			</text>
			<template name="c_console_custom"/>

			<template name="progress_bar"/>


			<action>
				<condition var1="tw_operation_state" var2="1"/>
				<action function="page">flash_done</action>
			</action>
		</page>

		<page name="flash_done">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header_failed">
				<condition var1="tw_operation_status" op="!=" var2="0"/>
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@c_failed=Failed}</text>
			</text>

			<text style="c_main_text_header_passed">
				<condition var1="tw_operation_status" var2="0"/>
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@c_passed=Successful}</text>
			</text>

			<action>
				<action function="set">tw_active_slot_install=0</action>
				<action function="set">tw_inject_after_zip=0</action>
			</action>

			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@c_flash_finished=Flashing Finished}</text>
			</text>

			<template name="c_console_custom"/>
			<template name="c_misc_panel"/>
			<button>
				<placement x="860" y="1628"/>
				<image resource="c_ok"/>
				<actions>
					<action function="page">c_refresh</action>
				</actions>
			</button>


			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=install</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="page">c_refresh</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_install_reboot" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
					<condition var1="tw_reboot_system" var2="1"/>
				</conditions>
				<actions>
					<action function="set">tw_sleep=%tw_sleep_total%</action>
					<action function="page">flash_sleep_and_reboot</action>
				</actions>
			</action>
		</page>

		<page name="flash_sleep_and_reboot">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@c_flashing_zip=Flashing Zip}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@install_reboot=Rebooting in %tw_sleep% secs(s)}</text>
			</text>
			<template name="c_console_custom"/>
			<template name="progress_bar"/>
			<button>
				<condition var1="tw_sleep" op="&gt;" var2="0"/>
				<placement x="860" y="1628"/>
				<image resource="c_cancel"/>
				<actions>
					<action function="set">tw_install_reboot=0</action>
					<action function="page">flash_done</action>
				</actions>
			</button>

			<action>
				<conditions>
					<condition var1="tw_sleep" var2="tw_sleep_total"/>
					<condition var1="tw_install_reboot" var2="1"/>
				</conditions>
				<action function="sleepcounter">%tw_sleep_total%</action>
			</action>

			<action>
				<conditions>
					<condition var1="tw_sleep" var2="0"/>
					<condition var1="tw_install_reboot" var2="1"/>
				</conditions>
				<actions>
					<action function="sleep">50000</action>
					<action function="set">tw_back=main2</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_action_param=system</action>
					<action function="set">tw_reboot_param=system</action>
					<action function="reboot">%tw_reboot_param%</action>
				</actions>
			</action>
		</page>

		<page name="flashimage_confirm">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@c_flash_img=Flash Image}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@install_sel_target=Select Target Partition}</text>
			</text>
			<partitionlist>
				<placement x="50" y="%file_selector_default_y%" w="%file_selector_default_w%" h="%file_selector_default_h%"/>
				<icon selected="radio_true" unselected="radio_false"/>
				<data name="tw_flash_partition"/>
				<listtype name="flashimg"/>
			</partitionlist>

			<button>
				<image resource="c_ok"/>
				<placement x="860" y="1628"/>
				<actions>
					<action function="page">c_flash_img_confirmer</action>
				</actions>
			</button>


			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=install</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>
		</page>

		<page name="c_flash_img_confirmer">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@c_confirm=Confirm}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@confirm_flash_hdr=Confirm Flash}</text>
			</text>
			<button>
				<placement x="860" y="1628"/>
				<image resource="c_flash"/>
				<actions>
					<action function="set">tw_back=flashimage_confirm</action>
					<action function="set">tw_action=flashimage</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@flashing_image=Flashing Image...}</action>
					<action function="set">tw_action_text2=Please wait</action>
					<action function="set">tw_complete_text1={@image_flashed=Image Flashed}</action>
					<action function="page">action_page</action>
				</actions>
				<action function="flashimage"/>
			</button>
			<action>
				<touch key="back"/>
				<action function="page">flashimage_confirm</action>
			</action>
			<action>
				<touch key="home"/>
				<action function="page">c_refresh</action>
			</action>
		</page>
		<page name="c_flash_zip_confirmer">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@c_confirm=Confirm}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@confirm_flash_hdr=Confirm Flash}</text>
			</text>

			<button>
				<placement x="860" y="1628"/>
				<image resource="c_flash"/>
				<action function="set">isShrpZip=0</action>
				<action function="set">c_queue_enabled=0</action>
				<action function="flash">flash_zip</action>
			</button>
			<action>
				<touch key="back"/>
				<action function="page">flash_confirm</action>
			</action>
			<action>
				<touch key="home"/>
				<action function="set">isShrpZip=0</action>
				<action function="queueclear"/>
				<action function="set">c_queue_enabled=0</action>
				<action function="page">c_refresh</action>
			</action>
		</page>
	</pages>
</recovery>