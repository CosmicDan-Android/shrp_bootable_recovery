<?xml version="1.0"?>
<recovery>
	<pages>
		<page name="backup">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@backup_hdr=Backup}</text>
			</text>
			<button>
				<placement x="920" y="%sort_button_y%"/>
				<image resource="c_epicxsort"/>
				<action function="page">backup_options</action>
			</button>

			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@storage_hdr=Storage: %tw_storage_display_name% (%tw_storage_free_size% MB)}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y_spec%"/>
				<text>{@name=Name:} %tw_backup_name%</text>
			</text>
			<button>
				<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%" w="%file_selector_default_w%" h="45"/>
				<fill color="%transparent%"/>
				<actions>
					<action function="set">tw_fileexists=0</action>
					<action function="page">backupname1</action>
				</actions>
			</button>

			<partitionlist>
				<placement x="55" y="%c_backup_partition_list_y%" w="%file_selector_default_w%" h="%c_backup_partition_list_h%"/>
				<data name="tw_backup_list"/>
				<listtype name="backup"/>
			</partitionlist>

			<button>
			  <placement x="860" y="1090"/>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="0"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
			  <image resource="c_backup_encryption"/>
			  <actions>
			    <action function="set">tw_password_not_match=0</action>
			    <action function="page">backupencryption</action>
			  </actions>
			</button>

			<button>
				<placement x="860" y="1270"/>
				<image resource="c_refresh"/>
				<actions>
					<action function="refreshsizes"/>
					<action function="page">backup</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				<placement x="860" y="1450"/>
				<image resource="c_storage"/>
				<actions>
					<action function="set">tw_back=backup</action>
					<action function="overlay">select_storage</action>
				</actions>
			</button>

			<button>
				<placement x="860" y="1628"/>
				<image resource="c_ok"/>
				<action function="page">backup_run</action>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">c_refresh</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">c_refresh</action>
			</action>
		</page>

		<page name="backup_options">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@options_hdr=Options}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@storage_hdr=Storage: %tw_storage_display_name% (%tw_storage_free_size% MB)}</text>
			</text>
			<checkbox>
				<placement x="%c_hawk_base_column%" y="%file_selector_default_y%"/>
				<text>{@enable_backup_comp_chk=Enable compression}</text>
				<data variable="tw_use_compression"/>
			</checkbox>

			<checkbox>
				<placement x="%c_hawk_base_column%" y="%input_file_manager_y%"/>
				<text>{@skip_digest_backup_chk=Skip Digest generation during backup}</text>
				<data variable="tw_skip_digest_generate"/>
			</checkbox>

			<checkbox>
				<placement x="%c_hawk_base_column%" y="%t_1st_radio_text_pos%"/>
				<text>{@disable_backup_space_chk=Disable free space check before backup}</text>
				<data variable="tw_disable_free_space"/>
			</checkbox>

			<text style="c_sub">
				<condition var1="tw_has_boot_slots" var2="1"/>
				<placement x="%c_hawk_base_column%" y="1645"/>
				<text>{@current_boot_slot=Current Slot: %tw_active_slot%}</text>
			</text>

			<button style="c_circle4">
				<condition var1="tw_has_boot_slots" var2="1"/>
				<placement x="860" y="1450"/>
				<text>{@boot_slot_a=Slot A}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=A</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<button style="c_circle4">
				<condition var1="tw_has_boot_slots" var2="1"/>
				<placement x="860" y="1628"/>
				<text>{@boot_slot_b=Slot B}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=B</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">c_refresh</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">backup</action>
			</action>
		</page>

		<page name="backupname1">
			<action>
				<condition var1="tw_backup_name" op="=" var2="{@auto_generate=(Auto Generate)}"/>
				<action function="generatebackupname"/>
			</action>

			<action>
				<action function="page">backupname2</action>
			</action>
		</page>

		<page name="backupname2">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@backup_hdr=Backup}</text>
			</text>
			<text style="c_text_dashboard">
				<condition var1="tw_fileexists" var2="0"/>
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@storage_hdr=Storage: %tw_storage_display_name% (%tw_storage_free_size% MB)}</text>
			</text>
			<template name="c_tab_backup"/>


			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y_spec%"/>
				<text>{@name=Name:}</text>
			</text>

			<fill color="nav_bg">
				<placement x="50" y="%dash_ico_1st_row%" w="970" h="94"/>
			</fill>

			<input>
				<placement x="80" y="%input_file_manager_y%" w="800" h="64"/>
				<background color="%nav_bg%"/>
				<text>%tw_backup_name%</text>
				<data name="tw_backup_name"/>
				<restrict minlen="1" maxlen="64" allow=" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890-_.{}[]"/>
				<actions>
					<action function="set">tw_filecheck=%tw_backups_folder%/%tw_backup_name%</action>
					<action function="set">tw_existpage=backupname2</action>
					<action function="set">tw_notexistpage=backup</action>
					<action function="page">filecheck</action>
				</actions>
			</input>
			<button>
				<placement x="944" y="%c_cleanInputYpos%"/>
				<image resource="c_clear_input"/>
				<action function="clearInput">tw_backup_name;backupname1</action>
			</button>

			<text style="c_text_dashboard">
				<condition var1="tw_fileexists" var2="1"/>
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@backup_name_exists=A backup with that name already exists!}</text>
			</text>
			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_backup_name={@auto_generate=(Auto Generate)}</action>
					<action function="page">c_refresh</action>
				</actions>
			</action>
			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_backup_name={@auto_generate=(Auto Generate)}</action>
					<action function="page">backup</action>
				</actions>
			</action>
		</page>

		<page name="backupencryption">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@encryption_tab=Encryption}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<condition var1="tw_password_not_match" var2="0"/>
				<text>{@c_encrypt_ques=Encrypt your Backup?}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<text>{@enter_pass=Enter Password:}</text>
			</text>

			<input>
				<placement x="60" y="%t_1st_heading%" w="%file_selector_default_w%" h="%input_height%"/>
				<text>%tw_backup_encrypt_display%</text>
				<data name="tw_backup_password" mask="*" maskvariable="tw_backup_encrypt_display"/>
				<restrict minlen="1" maxlen="32" allow="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_"/>
				<action function="page">backupencryption2</action>
			</input>

			<text style="c_sub_failed">
				<condition var1="tw_password_not_match" var2="1"/>
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>{@c_failed_same_info=Passwords did not match!}</text>
			</text>
			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<action function="page">c_refresh</action>
			</action>
			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_encrypt_backup=0</action>
					<action function="set">tw_backup_password=</action>
					<action function="set">tw_backup_password2=</action>
					<action function="set">tw_backup_encrypt_display=</action>
					<action function="set">tw_backup_encrypt_display2=</action>
					<action function="page">backup</action>
				</actions>
			</action>
		</page>

		<page name="backupencryption2">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>{@encryption_tab=Encryption}</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<condition var1="tw_password_not_match" var2="0"/>
				<text>{@c_encrypt_ques=Encrypt your Backup?}</text>
			</text>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="%c_text_sub_y%"/>
				<text>{@enter_pass_again=Enter Password again: }</text>
			</text>

			<input>
				<placement x="60" y="%t_1st_heading%" w="%file_selector_default_w%" h="%input_height%"/>
				<text>%tw_backup_encrypt_display2%</text>
				<data name="tw_backup_password2" mask="*" maskvariable="tw_backup_encrypt_display2"/>
				<restrict minlen="1" maxlen="32" allow="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_"/>
				<action function="page">checkbackuppassword</action>
			</input>
			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<action function="page">c_refresh</action>
			</action>
			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_encrypt_backup=0</action>
					<action function="set">tw_backup_password=</action>
					<action function="set">tw_backup_password2=</action>
					<action function="set">tw_backup_encrypt_display=</action>
					<action function="set">tw_backup_encrypt_display2=</action>
					<action function="page">backup</action>
				</actions>
			</action>
		</page>

		<page name="checkbackuppassword">
			<action>
				<condition var1="tw_backup_password2" var2="tw_backup_password"/>
				<actions>
					<action function="set">tw_encrypt_backup=1</action>
					<action function="page">backup</action>
				</actions>
			</action>
			<action>
				<condition var1="tw_backup_password2" op="!=" var2="tw_backup_password"/>
				<actions>
					<action function="set">tw_encrypt_backup=0</action>
					<action function="set">tw_password_not_match=1</action>
					<action function="set">tw_backup_password=</action>
					<action function="set">tw_backup_password2=</action>
					<action function="set">tw_backup_encrypt_display=</action>
					<action function="set">tw_backup_encrypt_display2=</action>
					<action function="page">backupencryption</action>
				</actions>
			</action>
		</page>

		<page name="backup_run">
			<template name="c_page"/>
			<template name="c_status_bar"/>
			<text style="c_main_text_header">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_first_header%"/>
				<text>%tw_operation%</text>
			</text>
			<text style="c_text_dashboard">
				<placement x="%c_hawk_base_column%" y="%c_hawk_base_second_header%"/>
				<text>%tw_partition% Partition</text>
			</text>
			<template name="c_console_custom"/>

			<template name="progress_bar"/>
			<text style="c_sub">
				<placement x="%c_hawk_base_column%" y="1430"/>
				<text>{@progress=Progress:} %tw_size_progress%</text>
			</text>
			<button>
				<placement x="860" y="1628"/>
				<image resource="c_cancel"/>
				<action function="cancelbackup"/>
			</button>

			<action>
				<action function="nandroid">backup</action>
			</action>
			<action>
				<condition var1="tw_operation_state" var2="1"/>
				<condition var1="tw_cancel_backup" var2="0"/>
				<actions>
					<action function="set">tw_back=backup</action>
					<action function="set">tw_complete_text1={@backup_complete=Backup Complete}</action>
					<action function="set">tw_show_reboot=1</action>
					<action function="page">action_complete</action>
				</actions>
			</action>
			<action>
				<condition var1="tw_operation_state" var2="1"/>
				<condition var1="tw_cancel_backup" var2="1"/>
				<actions>
					<action function="set">tw_back=backup</action>
					<action function="set">tw_complete_text1={@backup_cancel=Backup Cancelled}</action>
					<action function="set">tw_show_reboot=1</action>
					<action function="page">action_complete</action>
				</actions>
			</action>
		</page>
	</pages>
</recovery>